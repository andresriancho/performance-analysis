<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>Performance analysis report</title>

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
        <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    </head>

    <style>
        /* Damn navbar makes me pad the body
           https://stackoverflow.com/questions/10336194/twitter-bootstrap-top-nav-bar-blocking-top-content-of-the-page
        */
        body {
           padding-top: 65px;
        }
    </style>

    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">Performance analysis</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#memory">Memory</a></li>
                <li><a href="#network">Network</a></li>
              </ul>
            </div>
          </div>
        </nav>

        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>PSUtil memory usage</h3>

                <canvas id="PSUtilLineChart" width="800" height="400"></canvas>
                <script>
                    var colors = d3.scale.category10();

                    var data = {
                        labels: {{ max_items_count(collector_data, 'PSUtils memory usage summary') }},
                        datasets: [
                            {% for revision in collector_data.keys() %}
                                {
                                    label: "{{ revision }}",
                                    fillColor: colors({{ loop.index }}),
                                    strokeColor: "rgba(220,220,220,1)",
                                    pointColor: "rgba(220,220,220,1)",
                                    pointStrokeColor: "#fff",
                                    pointHighlightFill: "#fff",
                                    pointHighlightStroke: "rgba(220,220,220,1)",
                                    data: {{ collector_data[revision]['PSUtils memory usage summary'] }}
                                },
                            {% endfor %}
                        ]
                    };

                    // Get the context of the canvas element we want to select
                    var ctx = document.getElementById("PSUtilLineChart").getContext("2d");
                    var PSUtilLineChart = new Chart(ctx).Line(data);
                </script>
            </div>
        </div>
    </body>
</html>